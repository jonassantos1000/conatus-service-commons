CREATE TABLE TB_FORNECEDOR (
    IDENT BIGINT GENERATED BY DEFAULT AS IDENTITY,
    DS_NOME VARCHAR(200),
    DT_ATUALIZACAO TIMESTAMP(6) WITH TIME ZONE,
    ID_TENANT VARCHAR(255) NOT NULL,
    ID_USUARIO_ATUALIZACAO BIGINT NOT NULL,
    PRIMARY KEY (IDENT),
    CONSTRAINT FK_TENANT_FORNECEDOR FOREIGN KEY (ID_TENANT) REFERENCES TB_TENANT(CD_TENANT),
    CONSTRAINT FK_USUARIO_FORNECEDOR FOREIGN KEY (ID_USUARIO_ATUALIZACAO) REFERENCES TB_USUARIO(IDENT)
);

CREATE TABLE TB_CATEGORIA (
    IDENT BIGINT GENERATED BY DEFAULT AS IDENTITY,
    DS_DESCRICAO VARCHAR(200) NOT NULL,
    ID_TENANT VARCHAR(255) NOT NULL,
    ID_USUARIO_ATUALIZACAO BIGINT NOT NULL,
    DT_ATUALIZACAO TIMESTAMP(6) WITH TIME ZONE,
    PRIMARY KEY (IDENT),
    CONSTRAINT FK_TENANT_CATEGORIA FOREIGN KEY (ID_TENANT) REFERENCES TB_TENANT(CD_TENANT),
    CONSTRAINT FK_USUARIO_CATEGORIA FOREIGN KEY (ID_USUARIO_ATUALIZACAO) REFERENCES TB_USUARIO(IDENT)
); 

CREATE TABLE TB_PRODUTO (
    IDENT BIGINT GENERATED BY DEFAULT AS IDENTITY,
    DS_DESCRICAO VARCHAR(255),
    VL_UNIT NUMERIC(38,2),
    DT_ATUALIZACAO TIMESTAMP(6) WITH TIME ZONE,
    ID_FORNECEDOR BIGINT,
    ID_DOM_SITUACAO BIGINT,
    ID_TENANT VARCHAR(255) NOT NULL,
    ID_USUARIO_ATUALIZACAO BIGINT NOT NULL,
    PRIMARY KEY (IDENT),
    CONSTRAINT FK_FORNECEDOR_PRODUTO FOREIGN KEY (ID_FORNECEDOR) REFERENCES TB_FORNECEDOR(IDENT),
    CONSTRAINT FK_DOM_SITUACAO_PRODUTO FOREIGN KEY (ID_DOM_SITUACAO) REFERENCES TB_DOMINIO(IDENT),
    CONSTRAINT FK_TENANT_PRODUTO FOREIGN KEY (ID_TENANT) REFERENCES TB_TENANT(CD_TENANT),
    CONSTRAINT FK_USUARIO_PRODUTO FOREIGN KEY (ID_USUARIO_ATUALIZACAO) REFERENCES TB_USUARIO(IDENT)
);

CREATE TABLE TB_PRODUTO_CATEGORIA (
    IDENT BIGINT GENERATED BY DEFAULT AS IDENTITY,
    ID_CATEGORIA BIGINT NOT NULL,
    ID_PRODUTO BIGINT NOT NULL,
    ID_TENANT VARCHAR(255) NOT NULL,
    ID_USUARIO_ATUALIZACAO BIGINT NOT NULL,
    DT_ATUALIZACAO TIMESTAMP(6) WITH TIME ZONE,
    PRIMARY KEY (IDENT),
	CONSTRAINT FK_TENANT_PRODUTO_CATEGORIA FOREIGN KEY (ID_TENANT) REFERENCES TB_TENANT(CD_TENANT),
    CONSTRAINT FK_USUARIO_PRODUTO_CATEGORIA FOREIGN KEY (ID_USUARIO_ATUALIZACAO) REFERENCES TB_USUARIO(IDENT)
); 